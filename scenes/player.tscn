[gd_scene load_steps=12 format=3 uid="uid://djpyxgp2ue8hp"]

[ext_resource type="Script" path="res://scripts/player.gd" id="1_yd1ik"]
[ext_resource type="Texture2D" uid="uid://iymnxksgmrmr" path="res://assets/character.png" id="2_mm1p7"]
[ext_resource type="PackedScene" uid="uid://c2ptt1kw2oop" path="res://scenes/weapon.tscn" id="3_5fphg"]
[ext_resource type="Script" path="res://scripts/upgrade_menu.gd" id="3_bsty8"]
[ext_resource type="Resource" uid="uid://7si3g17yr2yu" path="res://resources/weapons/pistol.tres" id="4_5frl1"]
[ext_resource type="Texture2D" uid="uid://djamjw8p0mrrs" path="res://assets/ProgressUnder.svg" id="4_5m60e"]
[ext_resource type="Texture2D" uid="uid://bk4mogujc7275" path="res://assets/ProgressBar.svg" id="5_3vusx"]
[ext_resource type="Script" path="res://scripts/progress_bar.gd" id="6_b26ha"]

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_dgsdg"]

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_rjk66"]

[sub_resource type="Curve2D" id="Curve2D_plty3"]
_data = {
"points": PackedVector2Array(0, 0, 0, 0, -249, -149.6, 0, 0, 0, 0, 255.6, -153, 0, 0, 0, 0, 256.8, 159, 0, 0, 0, 0, -249.6, 159, 0, 0, 0, 0, -249, -149.6)
}
point_count = 5

[node name="Player" type="CharacterBody2D" groups=["Hittable", "Player"]]
scale = Vector2(5, 5)
collision_layer = 2
collision_mask = 21
script = ExtResource("1_yd1ik")
speed = 800.0
run_speed = 1200.0

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
shape = SubResource("CapsuleShape2D_dgsdg")

[node name="Sprite2D" type="Sprite2D" parent="."]
scale = Vector2(0.205, 0.16)
texture = ExtResource("2_mm1p7")

[node name="Camera2D" type="Camera2D" parent="."]
zoom = Vector2(0.5, 0.5)

[node name="UI" type="Control" parent="Camera2D"]
layout_mode = 3
anchors_preset = 0
offset_left = -222.0
offset_top = -122.0
offset_right = 222.0
offset_bottom = 124.0

[node name="VBoxContainer" type="VBoxContainer" parent="Camera2D/UI"]
layout_mode = 1
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
offset_left = -107.0
offset_top = 2.0
offset_bottom = 68.0
grow_horizontal = 0
alignment = 1

[node name="Pistol" type="Button" parent="Camera2D/UI/VBoxContainer"]
layout_mode = 2
text = "Pistol
"

[node name="Rifle" type="Button" parent="Camera2D/UI/VBoxContainer"]
layout_mode = 2
text = "Rifle"

[node name="Sniper Rifle" type="Button" parent="Camera2D/UI/VBoxContainer"]
layout_mode = 2
text = "Sniper Rifle"

[node name="UpgradeButton" type="Button" parent="Camera2D/UI"]
layout_mode = 0
offset_top = 212.6
offset_right = 75.0
offset_bottom = 243.6
text = "Upgrade"

[node name="UpgradeMenu" type="PanelContainer" parent="Camera2D/UI"]
visible = false
layout_mode = 1
anchors_preset = -1
anchor_top = -0.0121951
anchor_bottom = -0.0121951
offset_left = 101.0
offset_top = 26.0
offset_right = 327.0
offset_bottom = 200.0
theme_override_styles/panel = SubResource("StyleBoxFlat_rjk66")
script = ExtResource("3_bsty8")
metadata/_edit_use_anchors_ = true

[node name="UpgradeList" type="VBoxContainer" parent="Camera2D/UI/UpgradeMenu"]
layout_mode = 2

[node name="Health" type="HSplitContainer" parent="Camera2D/UI/UpgradeMenu/UpgradeList"]
layout_mode = 2

[node name="Title" type="Label" parent="Camera2D/UI/UpgradeMenu/UpgradeList/Health"]
layout_mode = 2
text = "Health"

[node name="Upgrade" type="GridContainer" parent="Camera2D/UI/UpgradeMenu/UpgradeList/Health"]
layout_mode = 2
size_flags_horizontal = 8
columns = 3

[node name="Number" type="Label" parent="Camera2D/UI/UpgradeMenu/UpgradeList/Health/Upgrade"]
layout_mode = 2
text = "100"

[node name="PlusHP" type="Button" parent="Camera2D/UI/UpgradeMenu/UpgradeList/Health/Upgrade"]
layout_mode = 2
disabled = true
text = "+"

[node name="Speed" type="HSplitContainer" parent="Camera2D/UI/UpgradeMenu/UpgradeList"]
layout_mode = 2

[node name="Title" type="Label" parent="Camera2D/UI/UpgradeMenu/UpgradeList/Speed"]
layout_mode = 2
text = "Speed"

[node name="Upgrade" type="GridContainer" parent="Camera2D/UI/UpgradeMenu/UpgradeList/Speed"]
layout_mode = 2
size_flags_horizontal = 8
columns = 3

[node name="Number" type="Label" parent="Camera2D/UI/UpgradeMenu/UpgradeList/Speed/Upgrade"]
layout_mode = 2
text = "100"

[node name="PlusSpeed" type="Button" parent="Camera2D/UI/UpgradeMenu/UpgradeList/Speed/Upgrade"]
layout_mode = 2
disabled = true
text = "+"

[node name="Stamina" type="HSplitContainer" parent="Camera2D/UI/UpgradeMenu/UpgradeList"]
layout_mode = 2

[node name="Title" type="Label" parent="Camera2D/UI/UpgradeMenu/UpgradeList/Stamina"]
layout_mode = 2
text = "Stamina"

[node name="Upgrade" type="GridContainer" parent="Camera2D/UI/UpgradeMenu/UpgradeList/Stamina"]
layout_mode = 2
size_flags_horizontal = 8
columns = 3

[node name="Number" type="Label" parent="Camera2D/UI/UpgradeMenu/UpgradeList/Stamina/Upgrade"]
layout_mode = 2
text = "100"

[node name="PlusStamina" type="Button" parent="Camera2D/UI/UpgradeMenu/UpgradeList/Stamina/Upgrade"]
layout_mode = 2
disabled = true
text = "+"

[node name="RegenRate" type="HSplitContainer" parent="Camera2D/UI/UpgradeMenu/UpgradeList"]
layout_mode = 2

[node name="Title" type="Label" parent="Camera2D/UI/UpgradeMenu/UpgradeList/RegenRate"]
layout_mode = 2
text = "Regen Rate
"

[node name="Upgrade" type="GridContainer" parent="Camera2D/UI/UpgradeMenu/UpgradeList/RegenRate"]
layout_mode = 2
size_flags_horizontal = 8
columns = 3

[node name="Number" type="Label" parent="Camera2D/UI/UpgradeMenu/UpgradeList/RegenRate/Upgrade"]
layout_mode = 2
text = "100"

[node name="PlusRegen" type="Button" parent="Camera2D/UI/UpgradeMenu/UpgradeList/RegenRate/Upgrade"]
layout_mode = 2
disabled = true
text = "+"

[node name="CloseButton" type="Button" parent="Camera2D/UI/UpgradeMenu/UpgradeList"]
layout_mode = 2
size_flags_vertical = 8
text = "Close"

[node name="UpgradePoints" type="Label" parent="Camera2D/UI"]
layout_mode = 2
offset_right = 57.0
offset_bottom = 23.0
text = "Points: 0"

[node name="TextureProgressBar" type="TextureProgressBar" parent="Camera2D/UI"]
layout_mode = 1
anchors_preset = 3
anchor_left = 1.0
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -131.4
offset_top = -25.4
offset_right = 318.6
offset_bottom = 24.6
grow_horizontal = 0
grow_vertical = 0
scale = Vector2(0.293927, 0.469476)
texture_under = ExtResource("4_5m60e")
texture_progress = ExtResource("5_3vusx")
script = ExtResource("6_b26ha")

[node name="Weapon" parent="." instance=ExtResource("3_5fphg")]
weapon_res = ExtResource("4_5frl1")

[node name="Path2D" type="Path2D" parent="."]
curve = SubResource("Curve2D_plty3")

[node name="PathFollow2D" type="PathFollow2D" parent="Path2D"]
position = Vector2(-249, -149.6)
rotation = -0.0067379

[node name="Marker2D" type="Marker2D" parent="Path2D/PathFollow2D"]

[node name="RegenTimer" type="Timer" parent="."]
autostart = true

[connection signal="pressed" from="Camera2D/UI/VBoxContainer/Pistol" to="." method="switch_weapon" binds= ["res://resources/weapons/pistol.tres"]]
[connection signal="pressed" from="Camera2D/UI/VBoxContainer/Rifle" to="." method="switch_weapon" binds= ["res://resources/weapons/rifle.tres"]]
[connection signal="pressed" from="Camera2D/UI/VBoxContainer/Sniper Rifle" to="." method="switch_weapon" binds= ["res://resources/weapons/sniper_rifle.tres"]]
[connection signal="pressed" from="Camera2D/UI/UpgradeButton" to="Camera2D/UI/UpgradeMenu" method="_on_upgrade_button_pressed"]
[connection signal="pressed" from="Camera2D/UI/UpgradeMenu/UpgradeList/Health/Upgrade/PlusHP" to="Camera2D/UI/UpgradeMenu" method="_on_plus_hp_pressed"]
[connection signal="pressed" from="Camera2D/UI/UpgradeMenu/UpgradeList/Speed/Upgrade/PlusSpeed" to="Camera2D/UI/UpgradeMenu" method="_on_plus_speed_pressed"]
[connection signal="pressed" from="Camera2D/UI/UpgradeMenu/UpgradeList/Stamina/Upgrade/PlusStamina" to="Camera2D/UI/UpgradeMenu" method="_on_plus_stamina_pressed"]
[connection signal="pressed" from="Camera2D/UI/UpgradeMenu/UpgradeList/RegenRate/Upgrade/PlusRegen" to="Camera2D/UI/UpgradeMenu" method="_on_plus_regen_pressed"]
[connection signal="pressed" from="Camera2D/UI/UpgradeMenu/UpgradeList/CloseButton" to="Camera2D/UI/UpgradeMenu" method="_on_close_button_pressed"]
[connection signal="timeout" from="RegenTimer" to="." method="_on_regen_timer_timeout"]
